<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="gbk">
    <title>my note</title>
    <meta name="viewport" content="width=device-width, user-scalable=no">
    <link rel="stylesheet" type="text/css" href="largeDisplay.css">
    <link rel="stylesheet" href="notes.css">
    <script src="operateNotes.js"></script>
    <script src="index.js"></script>
    <script src="ajust.js"></script>

    

    <script src="https://cdn.bootcss.com/jsPlumb/2.6.8/js/jsplumb.min.js"></script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
        integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
        crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
        integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
        integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
        crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.min.js" type="text/javascript"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.4/jquery-ui.min.js"
        type="text/javascript"></script>
    <script type="text/javascript" src="html2canvas.js"></script>
    <script type="text/javascript" src="FileSaver.js"></script>   
</head>

<body>
    <div class="container">
        <main role="main">
            <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1"
                id="sketchpad" preserveAspectRatio="xMinYMin meet" viewbox="0 0 3000 3000"></svg>
        </main>
    </div>

    <script type="text/javascript">
        $(function () {
            var svgRootDom = $("#sketchpad")[0];
            adjustToFreezeWidth(svgRootDom);
        });

    </script>

    <nav class="navbar fixed-bottom navbar-expand-lg navbar-light bg-light customnav ">
        <div class="container-fluid">
            <ul class="navbar-nav mx-auto">
                <li class="nav-item active">
                    <button class="btn  btn-default navbutton" onclick="">
                        <span class="navspan"
                            style="background: url(./images/icon-create.png) no-repeat;  background-size: 100%;"></span>
                    </button>

                    <button class="btn  btn-default navbutton" id="removeAllNote">
                        <span class="navspan"
                            style="background: url(./images/icon-trash.png) no-repeat;  background-size: 100%;"></span>
                    </button>

                    <button class="btn  btn-default navbutton" id="searchNote">
                        <span class="navspan"
                            style="background: url(./images/icon-search.png) no-repeat;  background-size: 100%;"></span>
                    </button>

                     <button class="btn btn-default navbutton"  onclick="upload()">
                        <span class="navspan"  style="background: url(./images/icon-upload.png) no-repeat;  background-size: 100%;" ></span>
                        <input type="file" id="files" style="display: none" onchange="fileImport();">
                    </button>

                    <button class="btn btn-default navbutton"  onclick="save()">
                        <span class="navspan"  style="background: url(./images/icon-download.png) no-repeat;  background-size: 100%;" ></span>
                    </button>

                    <button class="btn btn-default navbutton" id="searchNote">
                        <span class="navspan"
                            style="background: url(./images/icon-pen.png) no-repeat;  background-size: 100%;"></span>
                    </button>

                    <button class="btn btn-default navbutton" id="searchNote">
                        <span class="navspan"
                            style="background: url(./images/icon-shape.png) no-repeat;  background-size: 100%;"></span>
                    </button>

                   
                    <button class="btn btn-default navbutton" id="cluster" data-toggle="dropdown" aria-haspopup="true"
                        aria-expanded="false">
                        <span class="navspan"
                            style="background: url(./images/icon-cluster.png) no-repeat;  background-size: 100%;"></span>
                    </button>

                    <div class="btn-group dropup">
                        <div class="dropdown-menu" aria-labelledby="cluster" style="width: 178px;">
                            
                           <!-- Heirarchical clustering -->
                           <button class="btn  btn-default navbutton" id="heirarchical" >
                            <span class="navspan"
                            style="background: url(./images/icon-arch.png) no-repeat;  background-size: 100%;"></span>
                            </button>
                            <!-- K-mean clustering -->
                            <button class="btn  btn-default navbutton" id="kmean" >
                            <span class="navspan"
                            style="background: url(./images/icon-cluster1.png) no-repeat;  background-size: 100%;"></span>
                            </button>
                            <!-- Voronoi clustering -->
                            <button class="btn  btn-default navbutton" id="voronoi" >
                            <span class="navspan"
                            style="background: url(./images/icon-cluster2.png) no-repeat;  background-size: 100%;"></span>
                            </button>

                        </div>
                    </div>

                </li>
            </ul>
        </div>
    </nav>>


    <nav class="navbar fixed-top navbar-expand-lg navbar-light bg-light" style="margin-top: 5%;
    margin-bottom: 5%;">
        <div class="container-fluid">
            <ul class="navbar-nav mx-auto">
                <li class="nav-item dropright">
                    <div class="btn-group-vertical">
                    <button class="btn  btn-default navbutton" onclick="NoteOffset(2500)">
                        <span class="navspan"
                            style="background: url(./images/icon-create.png) no-repeat;  background-size: 100%;"></span>
                    </button>

                    <button class="btn  btn-default navbutton" onclick="removeAllNote()">
                        <span class="navspan"
                            style="background: url(./images/icon-trash.png) no-repeat;  background-size: 100%;"></span>
                    </button>

                    <button class="btn  btn-default navbutton" onclick="searchNote()">
                        <span class="navspan"
                            style="background: url(./images/icon-search.png) no-repeat;  background-size: 100%;"></span>
                    </button>

                     <button class="btn btn-default navbutton"  onclick="upload()">
                        <span class="navspan"  style="background: url(./images/icon-upload.png) no-repeat;  background-size: 100%;" ></span>
                        <input type="file" id="files" style="display: none" onchange="fileImport();">
                    </button>

                    <button class="btn btn-default navbutton"  onclick="save()">
                        <span class="navspan"  style="background: url(./images/icon-download.png) no-repeat;  background-size: 100%;" ></span>
                    </button>

                    <button class="btn btn-default navbutton" id="searchNote">
                        <span class="navspan"
                            style="background: url(./images/icon-pen.png) no-repeat;  background-size: 100%;"></span>
                    </button>

                    <button class="btn btn-default navbutton" id="searchNote">
                        <span class="navspan"
                            style="background: url(./images/icon-shape.png) no-repeat;  background-size: 100%;"></span>
                    </button>

                   
                    <button class="btn btn-default navbutton" id="cluster" data-toggle="dropdown" aria-haspopup="true"
                        aria-expanded="false">
                        <span class="navspan"
                            style="background: url(./images/icon-cluster.png) no-repeat;  background-size: 100%;"></span>
                    </button>

                    <div class="btn-group dropup">
                        <div class="dropdown-menu" aria-labelledby="cluster" style="width: 178px;">
                            
                            <!-- Heirarchical clustering -->
                            <button class="btn  btn-default navbutton" onclick="heirarchical()" >
                                <span class="navspan"
                                style="background: url(./images/icon-arch.png) no-repeat;  background-size: 100%;"></span>
                                </button>
                                <!-- K-mean clustering -->
                                <button class="btn  btn-default navbutton" onclick="kmean()" >
                                <span class="navspan"
                                style="background: url(./images/icon-cluster1.png) no-repeat;  background-size: 100%;"></span>
                                </button>
                                <!-- Voronoi clustering -->
                                <button class="btn  btn-default navbutton" onclick="voronoi()" >
                                <span class="navspan"
                                style="background: url(./images/icon-cluster2.png) no-repeat;  background-size: 100%;"></span>
                                </button>
                        </div>
                    </div>
                    </div>
                </li>
            </ul>
        </div>
    </nav>>


    <nav class="navbar fixed-top navbar-expand-lg navbar-light bg-light" style="margin-top: 5%;
    margin-bottom: 5%;left:2310px">
        <div class="container-fluid">
            <ul class="navbar-nav mx-auto">
                <li class="nav-item dropleft">
                    <div class="btn-group-vertical">
                    <button class="btn  btn-default navbutton" onclick="NoteOffset(2500)">
                        <span class="navspan"
                            style="background: url(./images/icon-create.png) no-repeat;  background-size: 100%;"></span>
                    </button>

                    <button class="btn  btn-default navbutton" onclick="removeAllNote()">
                        <span class="navspan"
                            style="background: url(./images/icon-trash.png) no-repeat;  background-size: 100%;"></span>
                    </button>

                    <button class="btn  btn-default navbutton" onclick="searchNote()">
                        <span class="navspan"
                            style="background: url(./images/icon-search.png) no-repeat;  background-size: 100%;"></span>
                    </button>

                     <button class="btn btn-default navbutton"  onclick="upload()">
                        <span class="navspan"  style="background: url(./images/icon-upload.png) no-repeat;  background-size: 100%;" ></span>
                        <input type="file" id="files" style="display: none" onchange="fileImport();">
                    </button>

                    <button class="btn btn-default navbutton"  onclick="save()">
                        <span class="navspan"  style="background: url(./images/icon-download.png) no-repeat;  background-size: 100%;" ></span>
                    </button>

                    <button class="btn btn-default navbutton" id="searchNote">
                        <span class="navspan"
                            style="background: url(./images/icon-pen.png) no-repeat;  background-size: 100%;"></span>
                    </button>

                    <button class="btn btn-default navbutton" id="searchNote">
                        <span class="navspan"
                            style="background: url(./images/icon-shape.png) no-repeat;  background-size: 100%;"></span>
                    </button>

                   
                    <button class="btn btn-default navbutton" id="cluster" data-toggle="dropdown" aria-haspopup="true"
                        aria-expanded="false">
                        <span class="navspan"
                            style="background: url(./images/icon-cluster.png) no-repeat;  background-size: 100%;"></span>
                    </button>

                    <div class="btn-group dropup">
                        <div class="dropdown-menu" aria-labelledby="cluster" style="width: 178px;">
                            
                            <!-- Heirarchical clustering -->
                            <button class="btn  btn-default navbutton" onclick="heirarchical()" >
                                <span class="navspan"
                                style="background: url(./images/icon-arch.png) no-repeat;  background-size: 100%;"></span>
                                </button>
                                <!-- K-mean clustering -->
                                <button class="btn  btn-default navbutton" onclick="kmean()" >
                                <span class="navspan"
                                style="background: url(./images/icon-cluster1.png) no-repeat;  background-size: 100%;"></span>
                                </button>
                                <!-- Voronoi clustering -->
                                <button class="btn  btn-default navbutton" onclick="voronoi()" >
                                <span class="navspan"
                                style="background: url(./images/icon-cluster2.png) no-repeat;  background-size: 100%;"></span>
                                </button>
                        </div>
                    </div>
                    </div>
                </li>
            </ul>
        </div>
    </nav>>
<script type="text/javascript">

         function save() {
             console.log("download png");
             html2canvas(document.body).then(canvas => {
                 //save as png like screenshot
                 canvas.toBlob(function(blob) {
                     saveAs(blob, "hangge.png");
                 });
             });
            //save as json
             var dataOut = {};
            for (var i = 0; i < localStorage.length; i++) {
                 var key = localStorage.key(i);
                 var values = localStorage.getItem(key);
                 var value = JSON.parse(values);
                 dataOut[key] = values;
            }
            var blob = new Blob([JSON.stringify(dataOut)], {type: "text/plain;charset=utf-8"});
             saveAs(blob, "save.json");
        
        
         }

        function upload(){
            /*#load:Ϊ��ť,���������һ�����ص�input file��ǩ*/
            document.getElementById("files").click();
        }
        function fileImport() {
            var selectedFile = document.getElementById('files').files[0];

            //�����ϴ��ļ�����
            var reader = new FileReader();//���Ǻ���,��ȡ���������������.
            reader.readAsText(selectedFile);//��ȡ�ļ�������,Ҳ���Զ�ȡ�ļ���URL
            reader.onload = function () {
                //����ȡ��ɺ�ص��������,Ȼ���ʱ�ļ������ݴ洢����result��,ֱ�Ӳ�������
                console.log(this.result);
                var ii =JSON.parse(this.result);
                for(var i in ii){
                    console.log(i+typeof Number(i)+typeof new Date().getTime());
                    console.log("-------------------");
                    console.log(JSON.parse(ii[i]));

                }
                loadData(true,this.result);
            }
        }
    </script>
</body>

</html>
